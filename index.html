<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Wrap Remix</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; font-family: Arial, sans-serif; background:#f2f2f2; }
header { background:#b30000; color:white; padding:20px; text-align:center; }
.container { max-width:900px; margin:20px auto; padding:15px; }
.box { background:white; padding:20px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
.hidden { display:none; }
label { display:block; margin-top:10px; font-weight:bold; }
input { width:100%; padding:8px; margin-top:5px; }
button { margin-top:15px; padding:10px 15px; background:#b30000; color:white; border:none; border-radius:5px; }
.menu { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:10px; margin-top:10px; }
.card { background:#eee; padding:10px; border-radius:6px; }
.total { font-weight:bold; margin-top:10px; }
</style>
</head>
<body>

<header>
<h1>üåØ Wrap Remix</h1>
</header>

<div class="container">

<div class="box" id="infoPage">
  <h2>Customer Information</h2>
  <label>Name</label><input id="nameInput">
  <label>Email</label><input id="emailInput">
  <label>Contact</label><input id="contactInput">
  <label>Address</label><input id="addressInput">
  <button id="continueBtn">Continue to Order</button>
</div>

<div class="box hidden" id="menuPage">
  <h2>Menu</h2>
  <p id="welcomeText"></p>

  <div class="menu">
    <div class="card"><b>Pastil Chick Remix</b><br>‚Ç±50<br><button onclick="addItem('Pastil Chick Remix',50)">Add</button></div>
    <div class="card"><b>Pastil Mush Remix</b><br>‚Ç±45<br><button onclick="addItem('Pastil Mush Remix',45)">Add</button></div>
    <div class="card"><b>Pork Sisig Remix</b><br>‚Ç±50<br><button onclick="addItem('Pork Sisig Remix',50)">Add</button></div>
    <div class="card"><b>Tofu Sisig Remix</b><br>‚Ç±45<br><button onclick="addItem('Tofu Sisig Remix',45)">Add</button></div>
    <div class="card"><b>Embutido Remix</b><br>‚Ç±45<br><button onclick="addItem('Embutido Remix',45)">Add</button></div>
    <div class="card"><b>Cheese Patty Remix</b><br>‚Ç±50<br><button onclick="addItem('Cheese Patty Remix',50)">Add</button></div>
  </div>

  <h3>Your Order</h3>
  <ul id="orderList"></ul>
  <div class="total" id="totalText">Total: ‚Ç±0</div>

  <button onclick="goToPayment()">Confirm Order</button>
</div>

<div class="box hidden" id="paymentPage">
  <h2>Payment Method</h2>
  <label><input type="radio" name="pay" value="Cash on Delivery"> Cash on Delivery</label>
  <label><input type="radio" name="pay" value="GCash"> GCash</label>
  <button onclick="confirmPayment()">Proceed to Receipt</button>
</div>

<div class="box hidden" id="receiptPage">
  <h2>Receipt</h2>
  <p><b>Order No:</b> <span id="orderNoText"></span></p>
  <p><b>Name:</b> <span id="rName"></span></p>
  <p><b>Contact:</b> <span id="rContact"></span></p>
  <p><b>Address:</b> <span id="rAddress"></span></p>
  <ul id="receiptItems"></ul>
  <p class="total" id="receiptTotal"></p>
  <p><b>Payment:</b> <span id="receiptPay"></span></p>
  <p><b>Business Address:</b> 670 Quirino Hwy</p>
  <button onclick="goToPickup()">Proceed to Pickup</button>
</div>

<div class="box hidden" id="pickupPage">
  <h2>Pickup Confirmation</h2>
  <input id="pickupInput" placeholder="Enter Order No">
  <button onclick="confirmPickup()">Confirm</button>
  <p id="pickupMsg"></p>
</div>

</div>

<script>
let orders = [];
let total = 0;
let currentOrderNo = "";

// FIXED BUTTON HANDLER
document.getElementById("continueBtn").addEventListener("click", function(){
  const n = document.getElementById("nameInput").value.trim();
  const e = document.getElementById("emailInput").value.trim();
  const c = document.getElementById("contactInput").value.trim();
  const a = document.getElementById("addressInput").value.trim();

  if(n==="" || e==="" || c==="" || a===""){
    alert("Please fill in all fields.");
    return;
  }

  document.getElementById("welcomeText").textContent = "Welcome, " + n + "!";
  document.getElementById("infoPage").classList.add("hidden");
  document.getElementById("menuPage").classList.remove("hidden");
});

function addItem(name, price){
  orders.push({name, price});
  const li = document.createElement("li");
  li.textContent = name + " - ‚Ç±" + price;
  document.getElementById("orderList").appendChild(li);
  total += price;
  document.getElementById("totalText").textContent = "Total: ‚Ç±" + total;
}

function goToPayment(){
  if(orders.length === 0){
    alert("Please add at least one item.");
    return;
  }
  document.getElementById("menuPage").classList.add("hidden");
  document.getElementById("paymentPage").classList.remove("hidden");
}

function confirmPayment(){
  const pay = document.querySelector('input[name="pay"]:checked');
  if(!pay){
    alert("Select a payment method.");
    return;
  }

  let last = localStorage.getItem("lastOrderNo");
  let newNo = last ? parseInt(last) + 1 : 1;
  localStorage.setItem("lastOrderNo", newNo);
  currentOrderNo = newNo.toString().padStart(4,"0");

  document.getElementById("orderNoText").textContent = currentOrderNo;
  document.getElementById("rName").textContent = document.getElementById("nameInput").value;
  document.getElementById("rContact").textContent = document.getElementById("contactInput").value;
  document.getElementById("rAddress").textContent = document.getElementById("addressInput").value;
  document.getElementById("receiptPay").textContent = pay.value;

  const list = document.getElementById("receiptItems");
  list.innerHTML = "";
  orders.forEach(o=>{
    const li = document.createElement("li");
    li.textContent = o.name + " - ‚Ç±" + o.price;
    list.appendChild(li);
  });
  document.getElementById("receiptTotal").textContent = "Total: ‚Ç±" + total;

  document.getElementById("paymentPage").classList.add("hidden");
  document.getElementById("receiptPage").classList.remove("hidden");
}

function goToPickup(){
  document.getElementById("receiptPage").classList.add("hidden");
  document.getElementById("pickupPage").classList.remove("hidden");
}

function confirmPickup(){
  const code = document.getElementById("pickupInput").value.trim();
  if(code === currentOrderNo){
    document.getElementById("pickupMsg").textContent = "‚úÖ Order confirmed!";
  } else {
    document.getElementById("pickupMsg").textContent = "‚ùå Invalid order number.";
  }
}
</script>

</body>
</html>